<div class="container max-width-400px">
  <div class="post-it mt-5 w-100">


    <div class="post-it-title pb-1">
      <h2 class="pb-0">Register</h2>
    </div>
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="px-4">
      <div class="mb-3">
        <label for="username" class="form-label">Username</label>
        <input type="text" id="username" class="input-underline" formControlName="username">
        <div
          *ngIf="registerForm.get('username')?.invalid && (registerForm.get('username')?.touched || registrationAttempted)"
          class="text-danger">
          Username is required and should be 6-28 characters long.
        </div>
      </div>


      <div class="mb-3">
        <label for="password" class="form-label">Password</label>
        <input type="password" id="password" class="input-underline" formControlName="password">
        <div *ngIf="getFormControlErrors('password')?.['strongPassword'] && registerForm.get('password')?.touched
          || registrationAttempted"
             class="text-danger">
          Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character.
        </div>
        <div *ngIf="getFormControlErrors('password')?.['minlength'] && registerForm.get('password')?.touched
          || registrationAttempted"
             class="text-danger">
          Password must be at least 6 characters long.
        </div>
        <div *ngIf="getFormControlErrors('password')?.['required'] && registerForm.get('password')?.touched
          || registrationAttempted"
             class="text-danger">
          Password is required.
        </div>
      </div>

      <div class="mb-3">
        <label for="confirmPassword" class="form-label">Confirm Password</label>
        <input type="password" id="confirmPassword" class="input-underline" formControlName="confirmPassword">
        <div *ngIf="getFormControlErrors('confirmPassword')?.['passwordsMismatch'] && registerForm.get('confirmPassword')?.touched
          || registrationAttempted"
             class="text-danger">
          Passwords must match
        </div>
      </div>

      <div *ngIf="registrationError" class="text-danger mb-3">
        Registration failed. Please try again.
      </div>

      <div class="d-flex flex-row justify-content-between align-items-center">

        <p class="mt-3">Already have an account? <a routerLink="/login">Login here</a></p>
        <button type="submit" class="btn btn-primary" [disabled]="registerForm.invalid">Register</button>

      </div>

    </form>

  </div>
</div>
